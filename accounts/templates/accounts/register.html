<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Create Account | CareConnect</title>
    <link rel="icon" href="https://www.hhaexchange.com/wp-content/uploads/2023/02/CareConnect_LogoRefresh_Final_Stacked_NoTagline-1920x1200.png">

    <style>
        *{
            box-sizing: border-box;
            font-family: Arial, Helvetica, sans-serif;
        }

        body{
            margin: 0;
            background: #f5f5f5;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .container{
            width: 100%;
            max-width: 420px;
            background: #fff;
            padding: 30px 28px;
            border-radius: 10px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.1);
        }

        .logo{
            text-align: center;
            font-size: 28px;
            margin-bottom: 10px;
        }

        h1{
            text-align: center;
            font-size: 22px;
            margin-bottom: 5px;
        }

        .subtext{
            text-align: center;
            font-size: 14px;
            margin-bottom: 25px;
        }

        .subtext a{
            text-decoration: underline;
            color: black;
            font-weight: bold;
        }

        label{
            font-size: 14px;
            font-weight: bold;
            display: block;
            margin: 12px 0 6px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        input, select{
            width: 100%;
            padding: 11px;
            border-radius: 6px;
            border: 1.5px solid #ddd;
            font-size: 14px;
        }

        input:focus, select:focus{
            outline: none;
            border-color: black;
        }

        /* ✅ ERROR STATE - Red border */
        input.error-field, 
        select.error-field {
            border-color: #e74c3c !important;
            background-color: #fadbd8;
        }

        /* ✅ Error message below field */
        .error-message {
            color: #e74c3c;
            font-size: 12px;
            margin-top: 4px;
            font-weight: bold;
            display: block;
        }

        .terms{
            background: #0aa934;
            color: white;
            font-size: 14px;
            padding: 10px;
            border-radius: 6px;
            text-align: center;
            margin: 18px 0 8px;
            font-weight: bold;
        }

        .policy{
            text-align: center;
            font-size: 12px;
            margin-bottom: 20px;
        }

        .policy a{
            color: blue;
        }

        .btn{
            width: 100%;
            padding: 13px;
            border-radius: 8px;
            border: none;
            background: #111;
            color: white;
            font-size: 15px;
            font-weight: bold;
            cursor: pointer;
        }

        .btn:hover {
            background: #333;
        }

        .divider{
            text-align: center;
            margin: 22px 0;
            color: #777;
            font-size: 13px;
            position: relative;
        }

        .divider::before,
        .divider::after{
            content: "";
            position: absolute;
            width: 40%;
            height: 1px;
            background: #ddd;
            top: 50%;
        }

        .divider::before{ left: 0; }
        .divider::after{ right: 0; }

        .google-btn{
            width: 100%;
            padding: 12px;
            border-radius: 8px;
            border: 1px solid #ddd;
            background: white;
            font-weight: bold;
            cursor: pointer;
        }

        /* ✅ MESSAGES STYLING */
        .messages {
            margin-bottom: 20px;
        }

        .messages p {
            padding: 12px 14px;
            border-radius: 6px;
            font-size: 13px;
            margin-bottom: 10px;
            text-align: center;
            font-weight: bold;
        }

        .messages p.error {
            background: #e74c3c;
            color: white;
            border-left: 4px solid #c0392b;
        }

        .messages p.success {
            background: #2ecc71;
            color: white;
            border-left: 4px solid #27ae60;
        }

        .messages p.warning {
            background: #f39c12;
            color: white;
            border-left: 4px solid #d68910;
        }

        .messages p.info {
            background: #3498db;
            color: white;
            border-left: 4px solid #2980b9;
        }

        ::-webkit-scrollbar{
            display: none;
        }

        /* ---------- Small phones (up to 480px) ---------- */
        @media (max-width: 480px) {

            body{
                padding: 10px;
            }

            .container{
                padding: 22px 18px;
                border-radius: 8px;
            }

            h1{
                font-size: 20px;
            }

            label{
                font-size: 13px;
            }

            input, select{
                font-size: 13px;
                padding: 10px;
            }

            .btn,
            .google-btn{
                font-size: 14px;
                padding: 12px;
            }

            .terms{
                font-size: 13px;
                padding: 9px;
            }
        }

        /* ---------- Large phones & small tablets (481px–768px) ---------- */
        @media (min-width: 481px) and (max-width: 768px) {

            .container{
                max-width: 440px;
                padding: 28px 24px;
            }

            h1{
                font-size: 22px;
            }
        }

        /* ---------- Tablets & small laptops (769px–1024px) ---------- */
        @media (min-width: 769px) and (max-width: 1024px) {

            .container{
                max-width: 460px;
            }
        }

        /* ---------- Desktops & large screens (1025px and up) ---------- */
        @media (min-width: 1025px) {

            .container{
                max-width: 420px;
            }
        }   
    </style>
</head>

<body>

<div class="container">
    <h1>Create your CareConnect account</h1>

    <div class="subtext">
        Already have an account?
        <a href="{% url 'accounts:login' %}">Sign in</a>
    </div>

    <!-- ✅ MESSAGES SECTION -->
    {% if messages %}
        <div class="messages">
            {% for message in messages %}
                <p class="{% if message.level_tag == 'error' %}error{% elif message.level_tag == 'success' %}success{% elif message.level_tag == 'warning' %}warning{% else %}info{% endif %}">
                    {{ message }}
                </p>
            {% endfor %}
        </div>
    {% endif %}

    <form method="POST" action="{% url 'accounts:register' %}" novalidate>
        {% csrf_token %}

        <!-- ✅ ACCOUNT TYPE -->
        <div class="form-group">
            <label>Account Type</label>
            <select name="type" required>
                <option value="Patient" selected>Patient</option>
            </select>
        </div>

        <!-- ✅ FULL NAME -->
        <div class="form-group">
            <label>Full Name</label>
            <input 
                type="text" 
                name="fname" 
                placeholder="John Doe" 
                value="{{ request.POST.fname }}"
                required
            >
            {% if form.errors.fname %}
                <span class="error-message">❌ {{ form.errors.fname.0 }}</span>
            {% endif %}
        </div>

        <!-- ✅ EMAIL -->
        <div class="form-group">
            <label>Email</label>
            <input 
                type="email" 
                name="email" 
                placeholder="m@example.com" 
                value="{{ request.POST.email }}"
                required
            >
            {% if form.errors.email %}
                <span class="error-message">❌ {{ form.errors.email.0 }}</span>
            {% endif %}
        </div>

        <!-- ✅ PHONE NUMBER -->
        <div class="form-group">
            <label>Phone Number (10 digits)</label>
            <input 
                type="text" 
                name="phone" 
                placeholder="9876543210" 
                value="{{ request.POST.phone }}"
                maxlength="10"
                inputmode="numeric"
                required
            >
            {% if form.errors.phone %}
                <span class="error-message">❌ {{ form.errors.phone.0 }}</span>
            {% endif %}
        </div>

        <!-- ✅ AGE -->
        <div class="form-group">
            <label>Age</label>
            <input 
                type="number" 
                name="age" 
                placeholder="25" 
                value="{{ request.POST.age }}"
                min="1"
                max="120"
                required
            >
            {% if form.errors.age %}
                <span class="error-message">❌ {{ form.errors.age.0 }}</span>
            {% endif %}
        </div>

        <!-- ✅ GENDER -->
        <div class="form-group">
            <label>Gender</label>
            <select name="gender" required>
                <option value="">Select Gender</option>
                <option value="Male" {% if request.POST.gender == 'Male' %}selected{% endif %}>Male</option>
                <option value="Female" {% if request.POST.gender == 'Female' %}selected{% endif %}>Female</option>
                <option value="Other" {% if request.POST.gender == 'Other' %}selected{% endif %}>Other</option>
            </select>
            {% if form.errors.gender %}
                <span class="error-message">❌ {{ form.errors.gender.0 }}</span>
            {% endif %}
        </div>

        <!-- ✅ ADDRESS -->
        <div class="form-group">
            <label>Address</label>
            <input 
                type="text" 
                name="address" 
                placeholder="123 Main St, City" 
                value="{{ request.POST.address }}"
                required
            >
            {% if form.errors.address %}
                <span class="error-message">❌ {{ form.errors.address.0 }}</span>
            {% endif %}
        </div>

        <!-- ✅ BLOOD GROUP -->
        <div class="form-group">
            <label>Blood Group</label>
            <select name="bloodgroup" required>
                <option value="">Select Blood Group</option>
                <option value="A+" {% if request.POST.bloodgroup == 'A+' %}selected{% endif %}>A+</option>
                <option value="A-" {% if request.POST.bloodgroup == 'A-' %}selected{% endif %}>A-</option>
                <option value="B+" {% if request.POST.bloodgroup == 'B+' %}selected{% endif %}>B+</option>
                <option value="B-" {% if request.POST.bloodgroup == 'B-' %}selected{% endif %}>B-</option>
                <option value="O+" {% if request.POST.bloodgroup == 'O+' %}selected{% endif %}>O+</option>
                <option value="O-" {% if request.POST.bloodgroup == 'O-' %}selected{% endif %}>O-</option>
                <option value="AB+" {% if request.POST.bloodgroup == 'AB+' %}selected{% endif %}>AB+</option>
                <option value="AB-" {% if request.POST.bloodgroup == 'AB-' %}selected{% endif %}>AB-</option>
            </select>
            {% if form.errors.bloodgroup %}
                <span class="error-message">❌ {{ form.errors.bloodgroup.0 }}</span>
            {% endif %}
        </div>

        <!-- ✅ PASSWORD -->
        <div class="form-group">
            <label>Password</label>
            <input 
                type="password" 
                name="password1" 
                placeholder="Enter your password" 
                required
            >
            {% if form.errors.password1 %}
                <span class="error-message">❌ {{ form.errors.password1.0 }}</span>
            {% endif %}
        </div>

        <!-- ✅ CONFIRM PASSWORD -->
        <div class="form-group">
            <label>Repeat Password</label>
            <input 
                type="password" 
                name="password2" 
                placeholder="Repeat your password" 
                required
            >
            {% if form.errors.password2 %}
                <span class="error-message">❌ {{ form.errors.password2.0 }}</span>
            {% endif %}
        </div>

        <!-- ✅ Non-field errors (password mismatch) -->
        {% if form.non_field_errors %}
            <div style="background: #e74c3c; color: white; padding: 10px; border-radius: 6px; margin-bottom: 15px; text-align: center; font-weight: bold;">
                ❌ {{ form.non_field_errors.0 }}
            </div>
        {% endif %}

        <div class="terms">
            ✔ Terms & Conditions Accepted
        </div>

        <div class="policy">
            You have agreed to our
            <a href="#">Terms of Service</a> and
            <a href="#">Privacy Policy</a>
        </div>

        <button type="submit" class="btn">Create Account</button>

        <div class="divider">Or</div>

        <button type="button" class="google-btn">
            G Continue with Google
        </button>

    </form>
</div>

<script>
    // ✅ Highlight fields with errors
    document.addEventListener('DOMContentLoaded', function() {
        const errorElements = document.querySelectorAll('.error-message');
        errorElements.forEach(function(error) {
            const inputField = error.previousElementSibling;
            if (inputField && (inputField.tagName === 'INPUT' || inputField.tagName === 'SELECT')) {
                inputField.classList.add('error-field');
            }
        });
    });
</script>

</body>
</html>