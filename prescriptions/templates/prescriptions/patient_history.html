{% extends 'Home/dashboard.html' %}
{% block content %}

<style>
.page-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 24px;
}
.page-header h2 {
    font-size: 26px;
    font-weight: 700;
}
.book-btn-top {
    background: #2563eb;
    color: #fff;
    padding: 12px 18px;
    border-radius: 10px;
    text-decoration: none;
    font-weight: 600;
}
.appointment-box {
    background: #fff;
    border-radius: 16px;
    padding: 40px;
}
.appointment-list {
    display: flex;
    flex-direction: column;
    gap: 14px;
}
.appointment-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 18px;
    border-radius: 12px;
    border: 1px solid #e5e7eb;
    background: #fafafa;
}
.delete-btn {
    background: #dc2626;
    color: white;
    border: none;
    padding: 8px 14px;
    border-radius: 8px;
    cursor: pointer;
    font-weight: 600;
}
</style>

<div class="page-header">
    <h2>My Appointments</h2>
    <a href="{% url 'Appointments:appointment' %}" class="book-btn-top">
        Book Appointment
    </a>
</div>

<div class="appointment-box">

{% if appointments %}
    {% for ap in appointments %}
        <div style="padding:16px;border:1px solid #ddd;margin-bottom:12px;border-radius:8px;">

            <strong>
                {% if ap.doctor %}
                    Dr. {{ ap.doctor.user.get_full_name }}
                {% else %}
                    Dr. {{ ap.doctor_name }}
                {% endif %}
            </strong>

            <div>Date: {{ ap.date }}</div>

            {% if ap.time_from and ap.time_to %}
                <div>Time: {{ ap.time_from }} â€“ {{ ap.time_to }}</div>
            {% else %}
                <div>Time: {{ ap.time }}</div>
            {% endif %}

            <!-- DELETE BUTTON -->
         <form method="POST"
            action="{% url 'delete_appointment' ap.id %}"
            style="margin-top:10px;"
           onsubmit="return confirm('Are you sure you want to delete this appointment?');">
    {% csrf_token %}
    <button type="submit"
            style="background:#dc2626;color:#fff;border:none;padding:6px 14px;border-radius:6px;">
        Delete
    </button>
</form>

        </div>
    {% endfor %}
{% else %}
    <p>No appointments found.</p>
{% endif %}
</div>
{% endblock %}s
